<script lang="ts">
  import { Container } from 'lucide-svelte';
  import AnimatedBeam from './AnimatedBeam.svelte';
  import Circle from './Circle.svelte';

  let containerRef: HTMLDivElement | null = $state(null);

  // Circles
  let svelteCircleRef: SVGSVGElement | null = $state(null);
  let mySqlCircleRef: SVGSVGElement | null = $state(null);
  let nodeJsCircleRef: SVGSVGElement | null = $state(null);
  let dockerCircleRef: SVGSVGElement | null = $state(null);
  let clientCircleRef: SVGSVGElement | null = $state(null);
</script>

<div
  class="flex h-full flex-col items-center justify-between rounded-xl border border-border bg-secondary"
>
  <div
    bind:this={containerRef}
    class="relative flex h-full w-full grow flex-col items-center justify-center p-6"
  >
    <!-- Main Component  -->

    <div class="z-10 flex h-full w-full max-w-lg flex-row items-center justify-between gap-10">
      <div class="flex h-full flex-col justify-evenly gap-2">
        <!-- Svelte -->
        <Circle>
          <svg
            bind:this={svelteCircleRef}
            viewBox="0 0 256 308"
            class="size-full"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid"
            ><path
              d="M239.682 40.707C211.113-.182 154.69-12.301 113.895 13.69L42.247 59.356a82.198 82.198 0 0 0-37.135 55.056 86.566 86.566 0 0 0 8.536 55.576 82.425 82.425 0 0 0-12.296 30.719 87.596 87.596 0 0 0 14.964 66.244c28.574 40.893 84.997 53.007 125.787 27.016l71.648-45.664a82.182 82.182 0 0 0 37.135-55.057 86.601 86.601 0 0 0-8.53-55.577 82.409 82.409 0 0 0 12.29-30.718 87.573 87.573 0 0 0-14.963-66.244"
              fill="#FF3E00"
            /><path
              d="M106.889 270.841c-23.102 6.007-47.497-3.036-61.103-22.648a52.685 52.685 0 0 1-9.003-39.85 49.978 49.978 0 0 1 1.713-6.693l1.35-4.115 3.671 2.697a92.447 92.447 0 0 0 28.036 14.007l2.663.808-.245 2.659a16.067 16.067 0 0 0 2.89 10.656 17.143 17.143 0 0 0 18.397 6.828 15.786 15.786 0 0 0 4.403-1.935l71.67-45.672a14.922 14.922 0 0 0 6.734-9.977 15.923 15.923 0 0 0-2.713-12.011 17.156 17.156 0 0 0-18.404-6.832 15.78 15.78 0 0 0-4.396 1.933l-27.35 17.434a52.298 52.298 0 0 1-14.553 6.391c-23.101 6.007-47.497-3.036-61.101-22.649a52.681 52.681 0 0 1-9.004-39.849 49.428 49.428 0 0 1 22.34-33.114l71.664-45.677a52.218 52.218 0 0 1 14.563-6.398c23.101-6.007 47.497 3.036 61.101 22.648a52.685 52.685 0 0 1 9.004 39.85 50.559 50.559 0 0 1-1.713 6.692l-1.35 4.116-3.67-2.693a92.373 92.373 0 0 0-28.037-14.013l-2.664-.809.246-2.658a16.099 16.099 0 0 0-2.89-10.656 17.143 17.143 0 0 0-18.398-6.828 15.786 15.786 0 0 0-4.402 1.935l-71.67 45.674a14.898 14.898 0 0 0-6.73 9.975 15.9 15.9 0 0 0 2.709 12.012 17.156 17.156 0 0 0 18.404 6.832 15.841 15.841 0 0 0 4.402-1.935l27.345-17.427a52.147 52.147 0 0 1 14.552-6.397c23.101-6.006 47.497 3.037 61.102 22.65a52.681 52.681 0 0 1 9.003 39.848 49.453 49.453 0 0 1-22.34 33.12l-71.664 45.673a52.218 52.218 0 0 1-14.563 6.398"
              fill="#FFF"
            /></svg
          >
        </Circle>
        <!-- MySQL -->
        <Circle>
          <svg bind:this={mySqlCircleRef} class="size-full" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 1.5C4.96243 1.5 2.5 2.44143 2.5 3.60275V12.4343C2.5 13.5956 4.96243 14.537 8 14.537C11.0376 14.537 13.5 13.5956 13.5 12.4343V3.60275C13.5 2.44143 11.0376 1.5 8 1.5Z" fill="#FAF5FF"/>
            <ellipse cx="8" cy="3.60275" rx="5.5" ry="2.10275" stroke="#834DF0"/>
            <path d="M13.5 12.4343C13.5 13.5956 11.0376 14.537 8 14.537C4.96243 14.537 2.5 13.5956 2.5 12.4343" stroke="#834DF0"/>
            <path d="M13.5 9.49045C13.5 10.6518 11.0376 11.5932 8 11.5932C4.96243 11.5932 2.5 10.6518 2.5 9.49045" stroke="#834DF0"/>
            <path d="M13.5 6.5466C13.5 7.70792 11.0376 8.64935 8 8.64935C4.96243 8.64935 2.5 7.70792 2.5 6.5466" stroke="#834DF0"/>
            <path d="M13.5 3.39249V12.5184" stroke="#834DF0"/>
            <path d="M2.5 3.39249V12.5184" stroke="#834DF0"/>
          </svg>
        </Circle>
        <!-- NodeJs -->
        <Circle>
          <svg bind:this={nodeJsCircleRef} class="size-full" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.39619 15.7304C7.58149 15.8371 7.7914 15.8925 8.00275 15.8925L8.00217 15.8895C8.21642 15.8895 8.42633 15.8345 8.61162 15.7274L14.3934 12.3877C14.7669 12.1705 15 11.7667 15 11.3338V4.66025C15 4.22597 14.7669 3.82208 14.3934 3.60638L8.61162 0.265259C8.24827 0.058248 7.76187 0.058248 7.39562 0.265259L1.60656 3.60493C1.23162 3.81918 1 4.22452 1 4.65881V11.3324C1 11.7652 1.23162 12.1705 1.60656 12.3877L3.12367 13.2621C3.85906 13.624 4.12253 13.624 4.45693 13.624C5.5441 13.624 6.16948 12.9653 6.16948 11.8188V5.22917C6.16948 5.13508 6.0942 5.06269 6.003 5.06269H5.2705C5.1764 5.06269 5.10257 5.13508 5.10257 5.22917V11.8159C5.10257 12.3254 4.57709 12.8321 3.7172 12.4022L2.13349 11.4873C2.07848 11.4569 2.04374 11.3961 2.04374 11.3324V4.65881C2.04374 4.59511 2.07935 4.53286 2.13537 4.50101L7.91517 1.16568C7.96873 1.13383 8.03966 1.13383 8.09323 1.16568L13.8742 4.50101C13.9289 4.53431 13.9636 4.59366 13.9636 4.66025V11.3338C13.9636 11.3975 13.9289 11.4598 13.8753 11.4902L8.09207 14.8284C8.04242 14.8573 7.96641 14.8573 7.91285 14.8284L6.42961 13.9482C6.38546 13.9222 6.329 13.9135 6.28587 13.9381C5.87546 14.1712 5.79744 14.2016 5.41295 14.3362C5.31784 14.3691 5.17713 14.4261 5.46549 14.5874L7.39619 15.7304Z" fill="#369650"/>
            <path d="M6.72799 9.1582C6.72799 10.1325 7.25855 11.294 9.789 11.294L9.78061 11.3008C11.6133 11.3008 12.6643 10.5785 12.6643 9.31903C12.6643 8.06973 11.8203 7.73677 10.0426 7.50081C8.24757 7.2634 8.06517 7.14035 8.06517 6.71909C8.06517 6.37166 8.22006 5.90842 9.55043 5.90842C10.7389 5.90842 11.1761 6.16465 11.3571 6.96519C11.373 7.04047 11.441 7.09548 11.5192 7.09548H12.2705C12.3168 7.09548 12.3617 7.07521 12.3936 7.04191C12.4254 7.00717 12.4428 6.96085 12.4384 6.91307C12.3226 5.53204 11.4048 4.88929 9.55333 4.88929C7.90448 4.88929 6.92009 5.58415 6.92009 6.75094C6.92009 8.01761 7.89869 8.36649 9.48239 8.52284C11.3759 8.70813 11.5235 8.98463 11.5235 9.35667C11.5235 10.003 11.0053 10.2784 9.7864 10.2784C8.25625 10.2784 7.9204 9.89446 7.80749 9.1333C7.79446 9.0518 7.72497 8.99172 7.64246 8.99172H6.89549C6.80269 8.99172 6.72799 9.06555 6.72799 9.1582Z" fill="#369650"/>
          </svg>
        </Circle>
      </div>
      <div class="flex flex-col justify-center">
        <!-- Docker -->
        <Circle>
          <svg bind:this={dockerCircleRef} class="size-full" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="7" y="4" width="3" height="3" rx="1" fill="#3574F0"/>
            <rect x="7" width="3" height="3" rx="1" fill="#3574F0"/>
            <rect x="3" y="4" width="3" height="3" rx="1" fill="#3574F0"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.2502 7.03904C15.2114 7.00829 14.85 6.73537 14.0877 6.73537C13.8864 6.73624 13.6856 6.75351 13.4871 6.78699C13.3397 5.77629 12.5043 5.28322 12.4661 5.26063L12.2613 5.14258L12.1267 5.33684C12.0046 5.5259 11.9063 5.72897 11.834 5.94141C11.8065 6.02221 11.7827 6.10437 11.7628 6.18763C11.6263 6.76488 11.7093 7.30705 12.0025 7.77057C11.6484 7.96789 11.0804 8.01646 10.9655 8.02076H1.96457C1.42639 8.02076 0.986026 8.44692 1.01182 8.98449C1.04487 9.67345 1.1422 10.5834 1.41263 11.196C1.90016 12.3003 2.44294 13.0098 3.34558 13.4401C4.24822 13.8704 4.80406 14.0163 6.09807 14.0163C6.68264 14.0181 7.26612 13.9652 7.84084 13.8583C8.63977 13.7116 9.40854 13.4323 10.1153 13.0321C10.6977 12.6948 11.2219 12.2658 11.6675 11.7614C12.2613 11.0893 12.6637 9.97522 12.9698 9.12794C13.0477 8.91217 13.1195 8.71333 13.1865 8.5439H13.3181C14.1338 8.5439 14.6354 8.21746 14.9121 7.94392C15.0959 7.76945 15.2394 7.55692 15.3326 7.3212L15.391 7.15031L15.2502 7.03904ZM5 12C5.55228 12 6 11.5523 6 11C6 10.4477 5.55228 10 5 10C4.44772 10 4 10.4477 4 11C4 11.5523 4.44772 12 5 12Z" fill="#3574F0"/>
          </svg>
        </Circle>
      </div>
      <div class="flec-col flex justify-center">
        <!-- Client -->
        <Circle>
          <svg class="size-full" bind:this={clientCircleRef} viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.99951 7C9.65637 7 10.9995 5.65685 10.9995 4C10.9995 2.34315 9.65637 1 7.99951 1C6.34266 1 4.99951 2.34315 4.99951 4C4.99951 5.65685 6.34266 7 7.99951 7Z" fill="#EBECF0"/>
            <path d="M2.10272 13.008C2.39906 11.3034 3.54766 8 7.99969 8C12.4517 8 13.6003 11.3034 13.8967 13.008C13.9912 13.5521 13.552 14 12.9997 14H2.99969C2.4474 14 2.00813 13.5521 2.10272 13.008Z" fill="#EBECF0"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9995 4C10.9995 5.65685 9.65637 7 7.99951 7C6.34266 7 4.99951 5.65685 4.99951 4C4.99951 2.34315 6.34266 1 7.99951 1C9.65637 1 10.9995 2.34315 10.9995 4ZM9.99951 4C9.99951 5.10457 9.10408 6 7.99951 6C6.89494 6 5.99951 5.10457 5.99951 4C5.99951 2.89543 6.89494 2 7.99951 2C9.10408 2 9.99951 2.89543 9.99951 4Z" fill="#6C707E"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99969 8C3.54766 8 2.39906 11.3034 2.10272 13.008C2.00813 13.5521 2.4474 14 2.99969 14H12.9997C13.552 14 13.9912 13.5521 13.8967 13.008C13.6003 11.3034 12.4517 8 7.99969 8ZM11.7438 10.5114C12.4081 11.2951 12.7281 12.2552 12.8778 13H3.12154C3.27126 12.2552 3.59131 11.2951 4.25563 10.5114C4.94028 9.70375 6.05804 9 7.99969 9C9.94134 9 11.0591 9.70375 11.7438 10.5114Z" fill="#6C707E"/>
          </svg>
        </Circle>
      </div>
    </div>

    <AnimatedBeam bind:containerRef bind:fromRef={svelteCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={mySqlCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={nodeJsCircleRef} bind:toRef={dockerCircleRef} />
    <AnimatedBeam bind:containerRef bind:fromRef={dockerCircleRef} bind:toRef={clientCircleRef} />
  </div>

  <!-- Footer -->
  <div class="p-6 pt-0">
    <span class="text-base font-medium text-neutral-700 dark:text-neutral-300">
      <Container class="inline size-[18px] align-middle" />
      Docker powered
    </span>
    <span class="text-base text-neutral-500"
      >Deploy anywhere with our Docker containers. Simple setup, seamless scaling.</span
    >
  </div>
</div>
